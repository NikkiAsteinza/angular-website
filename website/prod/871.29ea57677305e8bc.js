"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[871],{5871:(N,g,u)=>{u.r(g),u.d(g,{ProductModule:()=>G});var p=u(6814),a=u(2058),t=u(5879),s=u(3161),m=u(6970);function h(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"div",1),t._UZ(1,"app-page-header",2),t.TgZ(2,"div",3)(3,"button",4),t.NdJ("click",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.navigateToProductList())}),t._uU(4," volver"),t.qZA()(),t.TgZ(5,"div",5)(6,"div",6)(7,"div"),t._UZ(8,"img",7),t.TgZ(9,"div")(10,"p",8),t._uU(11),t.qZA(),t.TgZ(12,"p",8),t._uU(13),t.qZA(),t.TgZ(14,"p",8),t._uU(15),t.qZA()()(),t.TgZ(16,"div")(17,"button",9),t.NdJ("click",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.navigateToEditProduct(c.product.id))}),t._uU(18," Editar"),t.qZA(),t.TgZ(19,"button",9),t.NdJ("click",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.navigateToDeleteProduct(c.product.id))}),t._uU(20," Borrar"),t.qZA()()()(),t.TgZ(21,"div",10)(22,"button",9),t.NdJ("click",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.navigateToCreateProduct())}),t._uU(23,"Crear"),t.qZA()()()}if(2&r){const o=t.oxw();t.xp6(1),t.s9C("title",o.product.name),t.xp6(7),t.s9C("src",o.product.image,t.LSH),t.xp6(3),t.Oqu(o.product.name),t.xp6(2),t.Oqu(o.product.description),t.xp6(2),t.hij("Price: ",o.product.price,"")}}let x=(()=>{class r{constructor(o,n,c){this.router=o,this.activatedRoute=n,this.firestoreService=c,this.activatedRoute.params.subscribe(l=>{this.firestoreService.get(l.id).subscribe(_=>{this.product=_,console.log("PRODUCT TO SHOW"),console.log(this.product?.name)})})}navigateToProductList(){this.router.navigate(["products-list"])}navigateToCreateProduct(){this.router.navigate(["product","create"])}navigateToEditProduct(o){this.router.navigate(["product","edit",o])}navigateToDeleteProduct(o){this.router.navigate(["product","delete",o])}}return r.\u0275fac=function(o){return new(o||r)(t.Y36(a.F0),t.Y36(a.gz),t.Y36(s.x))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-product"]],decls:1,vars:1,consts:[["class","y-scrollable product-container",4,"ngIf"],[1,"y-scrollable","product-container"],[3,"title"],[1,"back"],[1,"back__button",3,"click"],[1,"product"],["layout","flex","appproducthover","product"],[1,"product__image",3,"src"],[1,"product__description"],[3,"click"],[1,"create"]],template:function(o,n){1&o&&t.YNc(0,h,24,5,"div",0),2&o&&t.Q6J("ngIf",n.product)},dependencies:[p.O5,m.q],styles:[".back[_ngcontent-%COMP%]{padding:16px;text-align:right}.back__button[_ngcontent-%COMP%]{position:sticky;background-color:#87cefa;border:1px solid black;border-radius:5px;padding:5px 10px;font-weight:700;text-transform:uppercase;transition:font-weight .2s}.back__button[_ngcontent-%COMP%]:hover{background-color:#3fe6fc}.product-container[_ngcontent-%COMP%]{height:100%}.product[_ngcontent-%COMP%]{background-color:#fff;width:90%;margin:0 5% 15px;box-sizing:border-box;border:1px solid #090909;border-radius:2px;padding:16px}.product__container[_ngcontent-%COMP%]{padding:10px 20px;justify-content:space-around}.product__container[_ngcontent-%COMP%]:hover{background-color:#7fffd4}.product__right__column[_ngcontent-%COMP%]{text-align:center}.product__name[_ngcontent-%COMP%]{font-weight:700}.product__button[_ngcontent-%COMP%]{border:none;padding:8px}.product__button--remove[_ngcontent-%COMP%]{background-color:salmon;font-weight:700}.product__image[_ngcontent-%COMP%]{display:block;width:60%}"]}),r})();var i=u(6223),v=u(617),P=u(2032),d=u(1941);function C(r,e){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const o=t.oxw(2);t.xp6(1),t.Oqu(o.getErrorMessage("name"))}}function Z(r,e){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const o=t.oxw(2);t.xp6(1),t.Oqu(o.getErrorMessage("description"))}}function T(r,e){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const o=t.oxw(2);t.xp6(1),t.Oqu(o.getErrorMessage("category"))}}function b(r,e){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const o=t.oxw(2);t.xp6(1),t.hij(" ",o.getErrorMessage("image"),"")}}function F(r,e){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const o=t.oxw(2);t.xp6(1),t.hij(" ",o.getErrorMessage("price"),"")}}function I(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"form",3),t.NdJ("submit",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.handleProduct())}),t.TgZ(1,"p")(2,"mat-form-field",4)(3,"mat-label"),t._uU(4,"Name"),t.qZA(),t._UZ(5,"input",5),t.YNc(6,C,2,1,"mat-error",2),t.TgZ(7,"mat-icon",6),t._uU(8,"sentiment_very_satisfied"),t.qZA(),t.TgZ(9,"mat-hint"),t._uU(10,"Product's name"),t.qZA()()(),t.TgZ(11,"p")(12,"mat-form-field",4)(13,"mat-label"),t._uU(14,"Description"),t.qZA(),t._UZ(15,"textarea",7),t.YNc(16,Z,2,1,"mat-error",2),t.TgZ(17,"mat-icon",6),t._uU(18,"sentiment_very_satisfied"),t.qZA(),t.TgZ(19,"mat-hint"),t._uU(20,"Product's description"),t.qZA()()(),t.TgZ(21,"p")(22,"mat-form-field",4)(23,"mat-label"),t._uU(24,"Category"),t.qZA(),t._UZ(25,"input",8),t.YNc(26,T,2,1,"mat-error",2),t.TgZ(27,"mat-icon",6),t._uU(28,"sentiment_very_satisfied"),t.qZA(),t.TgZ(29,"mat-hint"),t._uU(30,"Product's category"),t.qZA()()(),t._UZ(31,"p"),t.TgZ(32,"p")(33,"mat-form-field",4)(34,"mat-label"),t._uU(35,"Image"),t.qZA(),t._UZ(36,"input",9),t.YNc(37,b,2,1,"mat-error",2),t.TgZ(38,"mat-icon",6),t._uU(39,"sentiment_very_satisfied"),t.qZA(),t.TgZ(40,"mat-hint"),t._uU(41,"Product's image"),t.qZA()()(),t.TgZ(42,"p")(43,"mat-form-field",4)(44,"mat-label"),t._uU(45,"Price"),t.qZA(),t._UZ(46,"input",10),t.YNc(47,F,2,1,"mat-error",2),t.TgZ(48,"mat-icon",6),t._uU(49,"sentiment_very_satisfied"),t.qZA(),t.TgZ(50,"mat-hint"),t._uU(51,"Product's price"),t.qZA()()(),t.TgZ(52,"button",11),t._uU(53,"Save"),t.qZA()()}if(2&r){const o=t.oxw();t.Q6J("formGroup",o.productFormGroup),t.xp6(6),t.Q6J("ngIf",o.productFormGroup.controls.name.invalid),t.xp6(10),t.Q6J("ngIf",o.productFormGroup.controls.description.invalid),t.xp6(10),t.Q6J("ngIf",o.productFormGroup.controls.category.invalid),t.xp6(11),t.Q6J("ngIf",o.productFormGroup.controls.image.invalid),t.xp6(10),t.Q6J("ngIf",o.productFormGroup.controls.price.invalid)}}function U(r,e){1&r&&(t.TgZ(0,"p",12),t._uU(1,"Revisa el formulario, hay errores"),t.qZA())}function y(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"div")(1,"p",13),t._uU(2,"Se han creado los datos"),t.qZA(),t.TgZ(3,"button",14),t.NdJ("click",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.onBackToProductClicked())}),t._uU(4,"Crear otro producto"),t.qZA(),t.TgZ(5,"button",14),t.NdJ("click",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.onBackToProductClicked())}),t._uU(6,"Volver al producto"),t.qZA()()}}let f=(()=>{class r{constructor(o,n,c){this.router=o,this.formBuilder=n,this.productService=c,this.hasFormError=!1,this.hasSuccess=!1,this.isDataLoaded=!1}ngOnInit(){console.log("Build empty form",this.productI),this.buildForm()}ngOnChanges(o){o.productI&&this.productI&&!this.isDataLoaded&&(console.log("Product Received in Form:",this.productI),this.buildForm(),this.isDataLoaded=!0)}handleProduct(){this.productI?this.editProduct():(console.log(this.productFormGroup?.value),this.productFormGroup?.valid?(this.productService.create(this.productFormGroup.value),this.handleFormSuccess(!0)):this.handleFormSuccess(!1))}onCreateOtherClicked(){this.hasFormError=!1,this.hasSuccess=!0,this.productFormGroup?.reset()}onBackToProductClicked(){this.router.navigate(["product-list"])}getErrorMessage(o){return this.productFormGroup?.controls[o].hasError("required")?"Debes rellenar este campo para continuar":this.productFormGroup?.controls[o].hasError("min")?"El n\xfamero debe ser positivo":this.productFormGroup?.controls[o].hasError("email")?"El email no es v\xe1lido":""}editProduct(){if(this.productFormGroup?.valid){const o=this.productFormGroup.value;this.productI&&(o.id=this.productI.id),this.productService.update(o),this.handleFormSuccess(!0)}else this.handleFormSuccess(!1)}handleFormSuccess(o){this.hasFormError!=!o&&(this.hasFormError=!o),this.hasSuccess!=o&&(this.hasSuccess=o),o?this.productFormGroup?.reset():(console.log(this.productFormGroup?.errors),console.log(this.productFormGroup?.value))}buildForm(){console.log("hola"),this.productFormGroup=this.formBuilder.group({name:new i.NI(this.productI?.name||"",[i.kI.required]),category:new i.NI(this.productI?.category||"",[i.kI.required]),description:new i.NI(this.productI?.description||"",[i.kI.required,i.kI.maxLength(200)]),image:new i.NI(this.productI?.image||"",[i.kI.required]),price:new i.NI(this.productI?.price||"",[i.kI.required])})}}return r.\u0275fac=function(o){return new(o||r)(t.Y36(a.F0),t.Y36(i.qu),t.Y36(s.x))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-product-form"]],inputs:{productI:"productI"},features:[t.TTD],decls:3,vars:3,consts:[["class","app-form",3,"formGroup","submit",4,"ngIf"],["class","control_error",4,"ngIf"],[4,"ngIf"],[1,"app-form",3,"formGroup","submit"],["appearance","outline",1,"app-form__item"],["type","text","matInput","","placeholder","\xd1am! \xbfC\xf3mo se llama la nueva tarta?","formControlName","name"],["matSuffix",""],["matInput","","placeholder","Estamos deseando saber c\xf3mo es.","formControlName","description"],["matInput","","type","text","placeholder","Placeholder","formControlName","category"],["matInput","","type","url","placeholder","Placeholder","formControlName","image"],["matInput","","type","number","placeholder","Placeholder","formControlName","price"],["type","submit"],[1,"control_error"],[1,"control_success"],[3,"click"]],template:function(o,n){1&o&&(t.YNc(0,I,54,6,"form",0),t.YNc(1,U,2,0,"p",1),t.YNc(2,y,7,0,"div",2)),2&o&&(t.Q6J("ngIf",n.productFormGroup&&!n.hasSuccess),t.xp6(1),t.Q6J("ngIf",n.hasFormError),t.xp6(1),t.Q6J("ngIf",n.hasSuccess))},dependencies:[p.O5,v.Hw,P.Nt,d.KE,d.hX,d.bx,d.TO,d.R9,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u],styles:[".app-form[_ngcontent-%COMP%]{width:650px;box-sizing:border-box;padding:20px 16px;max-width:100%;background-color:#fff;border:1px solid #090909;border-radius:2px;margin:0 auto}.app-form__item[_ngcontent-%COMP%]{width:100%;margin-top:20px}"]}),r})();function k(r,e){1&r&&(t.TgZ(0,"div"),t._uU(1," Loading... "),t.qZA())}function A(r,e){if(1&r&&(t.ynx(0),t._UZ(1,"app-product-form",2),t.BQk()),2&r){const o=t.oxw();t.xp6(1),t.Q6J("productI",o.product)}}const w=[{path:"show/:id",pathMatch:"full",component:x},{path:"create",pathMatch:"full",component:(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-create-product"]],decls:2,vars:0,consts:[["title","Create Product"]],template:function(o,n){1&o&&t._UZ(0,"app-page-header",0)(1,"app-product-form")},dependencies:[f,m.q]}),r})()},{path:"delete/:id",pathMatch:"full",component:(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-delete-product"]],decls:2,vars:0,template:function(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"delete-product works!"),t.qZA())}}),r})()},{path:"edit/:id",pathMatch:"full",component:(()=>{class r{constructor(o,n){this.activatedRoute=o,this.firestoreService=n,this.loading=!0,this.activatedRoute.params.subscribe(c=>{this.firestoreService.get(c.id).subscribe(_=>{this.product=_,this.loading=!1,console.log("PRODUCT TO EDIT"),console.log(this.product?.name)})})}}return r.\u0275fac=function(o){return new(o||r)(t.Y36(a.gz),t.Y36(s.x))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-edit-product"]],decls:3,vars:2,consts:[["title","Edit Product"],[4,"ngIf"],[3,"productI"]],template:function(o,n){1&o&&(t._UZ(0,"app-page-header",0),t.YNc(1,k,2,0,"div",1),t.YNc(2,A,2,1,"ng-container",1)),2&o&&(t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading))},dependencies:[p.O5,f,m.q]}),r})()}];let E=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[a.Bz.forChild(w),a.Bz]}),r})();var O=u(6208);let G=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[p.ez,E,O.m]}),r})()}}]);